(this.webpackJsonpbridge=this.webpackJsonpbridge||[]).push([[0],{135:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"getNewDeskID",(function(){return M})),t.d(r,"getPairCard",(function(){return F}));var a={};t.r(a),t.d(a,"login",(function(){return H}));var c=t(0),i=t.n(c),o=t(12),s=t.n(o),u=(t(65),t(28)),l=t(33),j=t(173),b=t(14),d=t(167),f=t(177),h=Object(d.a)((function(){return Object(f.a)({appbar:{backgroundColor:"#3f51b5",height:70},link:{color:"#fff",textDecoration:"none",lineHeight:"32px","&:hover":{textDecoration:"underline"},"&.active":{fontWeight:"bold"}}})})),g=t(37),m=t(171),p=t(172),O=t(175),x=t(3);function v(e){var n=e.label,t=e.variant,r=e.name,a=e.onChange;return Object(x.jsx)(O.a,{label:n,variant:t,name:r,onChange:a})}var y=t(176);function C(e){var n=e.color,t=e.variant,r=e.size,a=e.content,c=e.onClick,i=e.type;return Object(x.jsx)(y.a,{type:i,color:n,variant:t,size:r,onClick:c,children:a})}var k,w,L=t(27),N=Object(f.a)({flexColumn:{display:"flex",flexDirection:"column",alignItems:"center"}}),S=Object(d.a)((function(){return Object(f.a)({balance:{textAlign:"center",marginTop:20,marginBottom:20},containerPlay:Object(L.a)({padding:"20px 0 100px 0",width:"100%",backgroundColor:"#3f51b515",height:500},N.flexColumn),containerCards:{marginTop:100,width:"100%",display:"flex",justifyContent:"space-between",alignSelf:"center"},buttons:{display:"flex",justifyContent:"space-evenly",alignItems:function(e){return e.isModePlay?"space-between":"center"}},divider:{margin:"0 16px 0"},card:Object(L.a)({border:"2px solid #000",borderRadius:4,width:226,height:314},N.flexColumn),questionMark:{marginTop:30,fontWeight:900,fontSize:74}})})),I=t(21),A=t.n(I),D=t(36),E=t(84),P=t.n(E).a.create({baseURL:"https://deckofcardsapi.com/api/deck/",responseType:"json"}),R=t(35);!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(k||(k={}));var B={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,JACK:20,QUEEN:30,KING:50,ACE:100},z=(w={},Object(R.a)(w,k.Left,"Left"),Object(R.a)(w,k.Right,"Right"),w),M=function(){var e=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.get("/new/shuffle/?deck_count=1").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(D.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.get("".concat(n,"/draw/?count=").concat(2)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q="admin",T="123456",H=function(){var e=Object(D.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.username!==Q||n.password!==T){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),q=function(e,n){return Object(l.useQuery)("pairCards",(function(){return r.getPairCard(e)}),{enabled:!!n})},J=function(){return Object(l.useQuery)("newDeskID",r.getNewDeskID)},G=t(85),K=function(){try{return"true"===localStorage.getItem("isAuth")}catch(e){return!1}},U=t.n(G)()((function(e){return{balance:100,payForPlay:function(n){return e((function(e){return{balance:e.balance-n}}))},incrementBalance:function(n){return e((function(e){return{balance:e.balance+n}}))},isAuth:K(),loginSuccess:function(){e((function(){return{isAuth:!0}}));try{localStorage.setItem("isAuth","true")}catch(n){}},logoutSuccess:function(){e((function(){return{isAuth:!1}}));try{localStorage.removeItem("isAuth")}catch(n){}},loginError:!1,activeLoginError:function(){e((function(){return{loginError:!0}}))},inactiveLoginError:function(){e((function(){return{loginError:!1}}))},remainingCards:null,updateRemainingCards:function(n){e((function(){return{remainingCards:n}}))}}}));var W=function(e){var n,t=e.deskID,r=U(),a=r.balance,i=r.payForPlay,o=r.incrementBalance,s=Object(c.useState)(null),u=Object(g.a)(s,2),l=u[0],b=u[1],d=Object(c.useState)(null),f=Object(g.a)(d,2),h=f[0],O=f[1],v=Object(c.useState)(null),y=Object(g.a)(v,2),w=y[0],L=y[1],N=S({isModePlay:h}),I=q(t,h),A=U().updateRemainingCards,D=Object(c.useState)([]),E=Object(g.a)(D,2),P=E[0],R=E[1],M=I.isLoading,F=I.data,Q=(F=void 0===F?{}:F).cards,T=void 0===Q?[]:Q,H=F.remaining,J=void 0===H?null:H;Object(c.useEffect)((function(){T.length&&(R(T),A(J))}),[T,J]);var G=function(e){var n=function(e){var n,t,r=null===(n=P[e])||void 0===n?void 0:n.value,a=null===(t=P.filter((function(n,t){return t!==e}))[0])||void 0===t?void 0:t.value;return B[r]>B[a]}(e);b(n),n&&o(10),L(z[e]),O((function(e){return!e}))},K=Object(x.jsx)("img",{src:P.length&&(null===(n=P[k.Left])||void 0===n?void 0:n.image),alt:"card"}),W=Object(c.useMemo)((function(){var e;return Object(x.jsx)("img",{src:P.length&&(null===(e=P[k.Right])||void 0===e?void 0:e.image),alt:"card"})}),[P]),$="boolean"===typeof l&&l?"\u0412\u044b \u0432\u044b\u0439\u0433\u0440\u0430\u043b\u0438 ".concat(10,"$"):"\u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438 ".concat(5),_=h?null:Object(x.jsx)(C,{type:"button",size:"large",color:"primary",variant:"contained",content:"boolean"===typeof h?"\u0421\u044b\u0433\u0440\u0430\u0435\u043c \u0435\u0449\u0435":"\u0418\u0433\u0440\u0430\u0442\u044c",onClick:function(){return i(5),L(null),b(null),O((function(e){return!e}))}}),V=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C,{type:"button",size:"large",color:"primary",variant:"contained",content:"\u0421\u043b\u0435\u0432\u0430",onClick:function(){return G(k.Left)}}),Object(x.jsx)(m.a,{orientation:"vertical",className:N.divider}),Object(x.jsx)(C,{type:"button",size:"large",color:"primary",variant:"contained",content:"\u0421\u043f\u0440\u0430\u0432\u0430",onClick:function(){return G(k.Right)}})]}),X=a<5&&!1===l,Y=Object(x.jsxs)(x.Fragment,{children:[w?K:Object(x.jsx)("div",{className:N.card,children:Object(x.jsx)("span",{className:N.questionMark,children:"?"})}),Object(x.jsxs)("div",{className:N.buttons,children:[X&&Object(x.jsxs)(p.a,{variant:"h5",align:"center",children:["Game over! ",Object(x.jsx)("br",{})," \u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438 ..."]}),M?Object(x.jsx)(p.a,{align:"center",children:"Loading..."}):Object(x.jsxs)(x.Fragment,{children:[!X&&_,h&&V]})]}),w?W:Object(x.jsx)("div",{className:N.card,children:Object(x.jsx)("span",{className:N.questionMark,children:"?"})})]});return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p.a,{className:N.balance,variant:"h5",children:"Balance: ".concat(a,"$")}),Object(x.jsxs)("div",{className:N.containerPlay,children:[Object(x.jsx)(p.a,{variant:"h3",children:"boolean"===typeof l?$:"\u041a\u0442\u043e \u0432\u044b\u0439\u0433\u0440\u0430\u0435\u0442?"}),Object(x.jsx)(p.a,{variant:"body1",children:"boolean"===typeof l?"\u0421\u044b\u0433\u0440\u0430\u0439 \u0432 \u0438\u0433\u0440\u0443 \u0435\u0449\u0435 \u0440\u0430\u0437":"\u0421\u044b\u0433\u0440\u0430\u0439 \u0432 \u0438\u0433\u0440\u0443 \u0438 \u0438\u0441\u043f\u044b\u0442\u0430\u0439 \u0443\u0434\u0430\u0447\u0443"}),Object(x.jsx)(j.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:Object(x.jsx)(j.a,{item:!0,xs:11,sm:8,className:N.containerCards,children:Y})})]})]})},$=t(174),_=Object(d.a)((function(){return Object(f.a)({spinner:{display:"flex",alignItems:"center",height:"80vh !important"}})})),V=function(){var e=_();return Object(x.jsx)($.a,{size:60,thickness:3,className:e.spinner})},X=function(){var e=J(),n=U().remainingCards,t=e.isLoading,r=e.data,a=(r=void 0===r?{}:r).deck_id,c=null!==n&&n<2?"new":a;return t?Object(x.jsx)(V,{}):Object(x.jsx)(W,{deskID:c})},Y=Object(d.a)((function(e){return Object(f.a)({form:{width:"inherit",display:"flex",flexDirection:"column",marginTop:100,"& .MuiInputBase-root":{marginBottom:e.spacing(2)}}})}));function Z(){var e=Y(),n=U(),t=n.isAuth,r=n.loginSuccess,i=n.loginError,o=n.activeLoginError,s=n.inactiveLoginError,u=Object(c.useState)({username:"",password:""}),l=Object(g.a)(u,2),d=l[0],f=l[1],h=function(e){return f((function(n){return Object(L.a)(Object(L.a)({},n),{},Object(R.a)({},e.target.name,e.target.value))}))};return t?Object(x.jsx)(b.a,{to:{pathname:"/"}}):Object(x.jsx)(j.a,{item:!0,lg:4,sm:6,xs:11,children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.login(d);case 3:e.sent?(r(),i&&s()):o(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},className:e.form,children:[Object(x.jsx)("h2",{children:"Sing in to your account"}),Object(x.jsx)(v,{variant:"outlined",label:"Login",onChange:h,name:"username"}),Object(x.jsx)(v,{variant:"outlined",label:"Parol",onChange:h,name:"password"}),Object(x.jsx)(C,{type:"submit",color:"primary",variant:"contained",size:"large",content:"Sing in"}),i&&Object(x.jsx)(p.a,{variant:"h6",color:"secondary",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e"})]})})}var ee=function(){return Object(x.jsx)(Z,{})},ne={Home:{path:"/",name:"Bridge",component:X},Login:{path:"/login",name:"LogOut",component:ee}};var te=function(){var e=h(),n=U(),t=n.isAuth,r=n.logoutSuccess;return Object(x.jsx)(j.a,{container:!0,className:e.appbar,alignItems:"center",justifyContent:"center",children:Object(x.jsxs)(j.a,{item:!0,lg:8,sm:10,xs:11,container:!0,alignItems:"center",justifyContent:"space-between",children:[Object(x.jsx)(u.b,{exact:!0,to:ne.Home.path,className:e.link,children:ne.Home.name}),t&&Object(x.jsx)(u.b,{to:ne.Login.path,className:e.link,onClick:r,children:ne.Login.name})]})})},re=t(87),ae=["children"],ce=function(e){var n=e.children,t=Object(re.a)(e,ae),r=U().isAuth;return Object(x.jsx)(b.b,Object(L.a)(Object(L.a)({},t),{},{render:function(e){var t=e.location;return r?n:Object(x.jsx)(b.a,{to:{pathname:"/login",state:{from:t}}})}}))};function ie(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(te,{}),Object(x.jsx)(j.a,{container:!0,alignItems:"stretch",justifyContent:"center",children:Object(x.jsxs)(b.d,{children:[Object(x.jsx)(ce,{path:"/Bridge",exact:!0,children:Object(x.jsx)(X,{})}),Object(x.jsx)(ce,{path:"/",exact:!0,children:Object(x.jsx)(X,{})}),Object(x.jsx)(b.b,{path:"/login",children:Object(x.jsx)(ee,{})})]})})]})}var oe=new l.QueryClient;s.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(l.QueryClientProvider,{client:oe,children:Object(x.jsx)(u.a,{children:Object(x.jsx)(ie,{})})})}),document.getElementById("root"))},65:function(e,n,t){}},[[135,1,2]]]);
//# sourceMappingURL=main.c106cd22.chunk.js.map