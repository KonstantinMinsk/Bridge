(this.webpackJsonpbridge=this.webpackJsonpbridge||[]).push([[0],{136:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"getNewDeskID",(function(){return T})),t.d(r,"getPairCard",(function(){return Q}));var a={};t.r(a),t.d(a,"login",(function(){return $}));var c=t(0),i=t.n(c),o=t(12),s=t.n(o),u=(t(66),t(29)),l=t(34),j=t(176),b=t(14),d=t(170),f=t(180),h=Object(d.a)((function(){return Object(f.a)({appbar:{backgroundColor:"#3f51b5",height:70},link:{color:"#fff",textDecoration:"none",lineHeight:"32px","&:hover":{textDecoration:"underline"},"&.active":{fontWeight:"bold"}}})})),g=t(37),m=t(40),p=t(173),O=t(174),x=t(175),v=t(178),y=t(3);function k(e){var n=e.label,t=e.variant,r=e.name,a=e.onChange;return Object(y.jsx)(v.a,{label:n,variant:t,name:r,onChange:a})}var C=t(179);function w(e){var n=e.color,t=e.variant,r=e.size,a=e.content,c=e.onClick,i=e.type;return Object(y.jsx)(C.a,{type:i,color:n,variant:t,size:r,onClick:c,children:a})}var L,N,I=t(24),S=t(26),B=Object(f.a)({flexColumn:{display:"flex",flexDirection:"column",alignItems:"center"}}),D=Object(d.a)((function(e){return Object(f.a)({balance:{textAlign:"center",marginTop:20,marginBottom:20},containerPlay:Object(S.a)({padding:"20px 0 100px 0",width:"100%",backgroundColor:"#3f51b515"},B.flexColumn),containerCards:Object(I.a)({marginTop:100,width:"100%",display:"flex",justifyContent:"space-between",alignSelf:"center"},e.breakpoints.down("sm"),{marginTop:16,flexDirection:"column",alignItems:"center"}),buttons:{margin:20,display:"flex",justifyContent:"space-evenly",alignItems:function(e){return e.isModePlay?"space-between":"center"}},divider:{margin:"0 16px 0"},card:Object(S.a)(Object(S.a)({border:function(e){return e.isModePlay?"2px solid #000":"none"},borderRadius:16,width:220,height:308},B.flexColumn),{},Object(I.a)({},e.breakpoints.down("sm"),{width:164,height:230,"& img":{width:"100%"}})),questionMark:{marginTop:30,fontWeight:900,fontSize:74}})})),A=t(21),E=t.n(A),P=t(36),R=t(85),M=t.n(R).a.create({baseURL:"https://deckofcardsapi.com/api/deck/",responseType:"json"});!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(L||(L={}));var z={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,JACK:20,QUEEN:30,KING:50,ACE:100},F=(N={},Object(I.a)(N,L.Left,"Left"),Object(I.a)(N,L.Right,"Right"),N),T=function(){var e=Object(P.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.get("/new/shuffle/?deck_count=1").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(P.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.get("".concat(n,"/draw/?count=").concat(2)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),q="admin",J="123456",$=function(){var e=Object(P.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.username!==q||n.password!==J){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(e,n){return Object(l.useQuery)("pairCards",(function(){return r.getPairCard(e)}),{enabled:!!n})},H=function(){return Object(l.useQuery)("newDeskID",r.getNewDeskID)},K=t(86),U=function(){try{return"true"===localStorage.getItem("isAuth")}catch(e){return!1}},W=t.n(K)()((function(e){return{balance:100,payForPlay:function(n){return e((function(e){return{balance:e.balance-n}}))},incrementBalance:function(n){return e((function(e){return{balance:e.balance+n}}))},isAuth:U(),loginSuccess:function(){e((function(){return{isAuth:!0}}));try{localStorage.setItem("isAuth","true")}catch(n){}},logoutSuccess:function(){e((function(){return{isAuth:!1}}));try{localStorage.removeItem("isAuth")}catch(n){}},loginError:!1,activeLoginError:function(){e((function(){return{loginError:!0}}))},inactiveLoginError:function(){e((function(){return{loginError:!1}}))},remainingCards:null,updateRemainingCards:function(n){e((function(){return{remainingCards:n}}))}}}));var _=function(e){var n,t=e.deskID,r=Object(m.a)(),a=Object(p.a)(r.breakpoints.down("sm")),i=Object(c.useState)(null),o=Object(g.a)(i,2),s=o[0],u=o[1],l=Object(c.useState)(null),b=Object(g.a)(l,2),d=b[0],f=b[1],h=Object(c.useState)(null),v=Object(g.a)(h,2),k=v[0],C=v[1],N=Object(c.useState)([]),I=Object(g.a)(N,2),S=I[0],B=I[1],A=W(),E=A.balance,P=A.payForPlay,R=A.incrementBalance,M=A.updateRemainingCards,T=G(t,d),Q=D({isModePlay:d}),q=T.isLoading,J=T.data,$=(J=void 0===J?{}:J).cards,H=void 0===$?[]:$,K=J.remaining,U=void 0===K?null:K;Object(c.useEffect)((function(){H.length&&(B(H),M(U))}),[H,U]);var _=function(e){var n=function(e){var n,t,r=null===(n=S[e])||void 0===n?void 0:n.value,a=null===(t=S.filter((function(n,t){return t!==e}))[0])||void 0===t?void 0:t.value;return z[r]>z[a]}(e);u(n),n&&R(10),C(F[e]),f((function(e){return!e}))},V=Object(y.jsx)("img",{src:S.length&&(null===(n=S[L.Left])||void 0===n?void 0:n.image),alt:"card"}),X=Object(c.useMemo)((function(){var e;return Object(y.jsx)("img",{src:S.length&&(null===(e=S[L.Right])||void 0===e?void 0:e.image),alt:"card"})}),[S]),Y="boolean"===typeof s&&s?"\u0412\u044b \u0432\u044b\u0439\u0433\u0440\u0430\u043b\u0438 ".concat(10,"$"):"\u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438 ".concat(5,"$"),Z=d?null:Object(y.jsx)(w,{type:"button",size:"large",color:"primary",variant:"contained",content:"boolean"===typeof d?"\u0421\u044b\u0433\u0440\u0430\u0435\u043c \u0435\u0449\u0435":"\u0418\u0433\u0440\u0430\u0442\u044c",onClick:function(){return P(5),C(null),u(null),f((function(e){return!e}))}}),ee=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(w,{type:"button",size:"large",color:"primary",variant:"contained",content:a?"\u0421\u0432\u0435\u0440\u0445\u0443":"\u0421\u043b\u0435\u0432\u0430",onClick:function(){return _(L.Left)}}),Object(y.jsx)(O.a,{orientation:"vertical",className:Q.divider}),Object(y.jsx)(w,{type:"button",size:"large",color:"primary",variant:"contained",content:a?"\u0421\u043d\u0438\u0437\u0443":"\u0421\u043f\u0440\u0430\u0432\u0430",onClick:function(){return _(L.Right)}})]}),ne=E<5&&!1===s,te=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:Q.card,children:k?V:Object(y.jsx)("span",{className:Q.questionMark,children:"?"})}),Object(y.jsxs)("div",{className:Q.buttons,children:[ne&&Object(y.jsxs)(x.a,{variant:"h5",align:"center",children:["Game over! ",Object(y.jsx)("br",{})," \u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438 ..."]}),q?Object(y.jsx)(x.a,{align:"center",children:"Loading..."}):Object(y.jsxs)(y.Fragment,{children:[!ne&&Z,d&&ee]})]}),Object(y.jsx)("div",{className:Q.card,children:k?X:Object(y.jsx)("span",{className:Q.questionMark,children:"?"})})]});return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(x.a,{className:Q.balance,variant:"h5",children:"Balance: ".concat(E,"$")}),Object(y.jsxs)("div",{className:Q.containerPlay,children:[Object(y.jsx)(x.a,{variant:a?"h4":"h3",children:"boolean"===typeof s?Y:"\u041a\u0442\u043e \u0432\u044b\u0438\u0433\u0440\u0430\u0435\u0442?"}),Object(y.jsx)(x.a,{variant:"body1",children:"boolean"===typeof s?"\u0421\u044b\u0433\u0440\u0430\u0439 \u0432 \u0438\u0433\u0440\u0443 \u0435\u0449\u0435 \u0440\u0430\u0437":"\u0421\u044b\u0433\u0440\u0430\u0439 \u0432 \u0438\u0433\u0440\u0443 \u0438 \u0438\u0441\u043f\u044b\u0442\u0430\u0439 \u0443\u0434\u0430\u0447\u0443"}),Object(y.jsx)(j.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:Object(y.jsx)(j.a,{item:!0,xs:11,sm:8,className:Q.containerCards,children:te})})]})]})},V=t(177),X=Object(d.a)((function(){return Object(f.a)({spinner:{display:"flex",alignItems:"center",height:"80vh !important"}})})),Y=function(){var e=X();return Object(y.jsx)(V.a,{size:60,thickness:3,className:e.spinner})},Z=function(){var e=H(),n=W().remainingCards,t=e.isLoading,r=e.data,a=(r=void 0===r?{}:r).deck_id,c=null!==n&&n<2?"new":a;return t?Object(y.jsx)(Y,{}):Object(y.jsx)(_,{deskID:c})},ee=Object(d.a)((function(e){return Object(f.a)({form:{width:"inherit",display:"flex",flexDirection:"column",marginTop:100,"& .MuiInputBase-root":{marginBottom:e.spacing(2)}}})}));function ne(){var e=ee(),n=W(),t=n.isAuth,r=n.loginSuccess,i=n.loginError,o=n.activeLoginError,s=n.inactiveLoginError,u=Object(c.useState)({username:"",password:""}),l=Object(g.a)(u,2),d=l[0],f=l[1],h=function(e){return f((function(n){return Object(S.a)(Object(S.a)({},n),{},Object(I.a)({},e.target.name,e.target.value))}))};return t?Object(y.jsx)(b.a,{to:{pathname:"/"}}):Object(y.jsx)(j.a,{item:!0,lg:4,sm:6,xs:11,children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object(P.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.login(d);case 3:e.sent?(r(),i&&s()):o(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},className:e.form,children:[Object(y.jsx)("h2",{children:"Sing in to your account"}),Object(y.jsx)(k,{variant:"outlined",label:"Login",onChange:h,name:"username"}),Object(y.jsx)(k,{variant:"outlined",label:"Parol",onChange:h,name:"password"}),Object(y.jsx)(w,{type:"submit",color:"primary",variant:"contained",size:"large",content:"Sing in"}),i&&Object(y.jsx)(x.a,{variant:"h6",color:"secondary",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e"})]})})}var te=function(){return Object(y.jsx)(ne,{})},re={Home:{path:"/",name:"Bridge",component:Z},Bridge:{path:"/Bridge",name:"Bridge",component:Z},Login:{path:"/login",name:"LogOut",component:te}};var ae=function(){var e=h(),n=W(),t=n.isAuth,r=n.logoutSuccess;return Object(y.jsx)(j.a,{container:!0,className:e.appbar,alignItems:"center",justifyContent:"center",children:Object(y.jsxs)(j.a,{item:!0,lg:8,sm:10,xs:11,container:!0,alignItems:"center",justifyContent:"space-between",children:[Object(y.jsx)(u.b,{exact:!0,to:re.Bridge.path,className:e.link,children:re.Bridge.name}),t&&Object(y.jsx)(u.b,{to:re.Login.path,className:e.link,onClick:r,children:re.Login.name})]})})},ce=t(88),ie=["children"],oe=function(e){var n=e.children,t=Object(ce.a)(e,ie),r=W().isAuth;return Object(y.jsx)(b.b,Object(S.a)(Object(S.a)({},t),{},{render:function(e){var t=e.location;return r?n:Object(y.jsx)(b.a,{to:{pathname:"/login",state:{from:t}}})}}))};function se(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(ae,{}),Object(y.jsx)(j.a,{container:!0,alignItems:"stretch",justifyContent:"center",children:Object(y.jsxs)(b.d,{children:[Object(y.jsx)(oe,{path:"/",exact:!0,children:Object(y.jsx)(Z,{})}),Object(y.jsx)(oe,{path:"/Bridge",exact:!0,children:Object(y.jsx)(Z,{})}),Object(y.jsx)(b.b,{path:"/login",children:Object(y.jsx)(te,{})})]})})]})}var ue=new l.QueryClient;s.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(l.QueryClientProvider,{client:ue,children:Object(y.jsx)(u.a,{children:Object(y.jsx)(se,{})})})}),document.getElementById("root"))},66:function(e,n,t){}},[[136,1,2]]]);
//# sourceMappingURL=main.d27a0f65.chunk.js.map