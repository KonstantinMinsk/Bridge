(this.webpackJsonpbridge=this.webpackJsonpbridge||[]).push([[0],{136:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"getNewDeskID",(function(){return Q})),t.d(r,"getPairCard",(function(){return q}));var a={};t.r(a),t.d(a,"login",(function(){return G}));var c=t(0),i=t.n(c),o=t(12),s=t.n(o),u=(t(66),t(29)),l=t(34),j=t(176),b=t(14),d=t(170),f=t(180),h=Object(d.a)((function(){return Object(f.a)({appbar:{backgroundColor:"#3f51b5",height:70},link:{color:"#fff",textDecoration:"none",lineHeight:"32px","&:hover":{textDecoration:"underline"},"&.active":{fontWeight:"bold"}}})})),m=t(37),p=t(40),g=t(173),O=t(174),x=t(175),v=t(178),y=t(3);function w(e){var n=e.label,t=e.variant,r=e.name,a=e.onChange;return Object(y.jsx)(v.a,{label:n,variant:t,name:r,onChange:a})}var k=t(179);function C(e){var n=e.color,t=e.variant,r=e.size,a=e.content,c=e.onClick,i=e.type;return Object(y.jsx)(k.a,{type:i,color:n,variant:t,size:r,onClick:c,children:a})}var L,N,D,I,S=t(20),E=t(26),A=Object(f.a)({flexColumn:{display:"flex",flexDirection:"column",alignItems:"center"}}),B=Object(d.a)((function(e){return Object(f.a)({balance:{textAlign:"center",marginTop:20,marginBottom:20},containerPlay:Object(E.a)({padding:"20px 0 100px 0",width:"100%",backgroundColor:"#3f51b515"},A.flexColumn),containerCards:Object(S.a)({marginTop:100,width:"100%",display:"flex",justifyContent:"space-between",alignSelf:"center"},e.breakpoints.down("sm"),{marginTop:16,flexDirection:"column",alignItems:"center"}),buttons:{margin:20,display:"flex",justifyContent:"space-evenly",alignItems:function(e){return e.isModePlay?"space-between":"center"}},divider:{margin:"0 16px 0"},card:Object(E.a)(Object(E.a)({border:function(e){return e.isModePlay?"2px solid #000":"none"},borderRadius:16,width:220,height:308},A.flexColumn),{},Object(S.a)({},e.breakpoints.down("sm"),{width:164,height:230,"& img":{width:"100%"}})),questionMark:{marginTop:30,fontWeight:900,fontSize:74}})})),P=t(22),R=t.n(P),M=t(36),z=t(85),F=t.n(z).a.create({baseURL:"https://deckofcardsapi.com/api/deck/",responseType:"json"});!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(L||(L={})),function(e){e[e.Lost=0]="Lost",e[e.Draw=1]="Draw",e[e.Won=2]="Won"}(N||(N={}));var H={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,JACK:20,QUEEN:30,KING:50,ACE:100},T=(D={},Object(S.a)(D,L.Left,"Left"),Object(S.a)(D,L.Right,"Right"),D),W=(I={},Object(S.a)(I,N.Lost,"\u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438 ".concat(5,"$")),Object(S.a)(I,N.Draw,"\u041d\u0438\u0447\u044c\u044f"),Object(S.a)(I,N.Won,"\u0412\u044b \u0432\u044b\u0438\u0433\u0440\u0430\u043b\u0438 ".concat(10,"$")),I),Q=function(){var e=Object(M.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get("/new/shuffle/?deck_count=1").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(M.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.get("".concat(n,"/draw/?count=").concat(2)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J="admin",$="123456",G=function(){var e=Object(M.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.username!==J||n.password!==$){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),K=function(e,n){return Object(l.useQuery)("pairCards",(function(){return r.getPairCard(e)}),{enabled:!!n})},U=function(){return Object(l.useQuery)("newDeskID",r.getNewDeskID)},_=t(86),V=function(){try{return"true"===localStorage.getItem("isAuth")}catch(e){return!1}},X=t.n(_)()((function(e){return{balance:100,payForPlay:function(n){return e((function(e){return{balance:e.balance-n}}))},incrementBalance:function(n){return e((function(e){return{balance:e.balance+n}}))},isAuth:V(),loginSuccess:function(){e((function(){return{isAuth:!0}}));try{localStorage.setItem("isAuth","true")}catch(n){}},logoutSuccess:function(){e((function(){return{isAuth:!1}}));try{localStorage.removeItem("isAuth")}catch(n){}},loginError:!1,activeLoginError:function(){e((function(){return{loginError:!0}}))},inactiveLoginError:function(){e((function(){return{loginError:!1}}))},remainingCards:null,updateRemainingCards:function(n){e((function(){return{remainingCards:n}}))}}}));var Y=function(e){var n,t=e.deskID,r=Object(p.a)(),a=Object(g.a)(r.breakpoints.down("sm")),i=Object(c.useState)(null),o=Object(m.a)(i,2),s=o[0],u=o[1],l=Object(c.useState)(null),b=Object(m.a)(l,2),d=b[0],f=b[1],h=Object(c.useState)(null),v=Object(m.a)(h,2),w=v[0],k=v[1],D=Object(c.useState)([]),I=Object(m.a)(D,2),S=I[0],E=I[1],A=X(),P=A.balance,R=A.payForPlay,M=A.incrementBalance,z=A.updateRemainingCards,F=K(t,d),Q=B({isModePlay:d}),q=F.isLoading,J=F.data,$=(J=void 0===J?{}:J).cards,G=void 0===$?[]:$,U=J.remaining,_=void 0===U?null:U;Object(c.useEffect)((function(){G.length&&(E(G),z(_))}),[G,_]);var V=function(e){var n=function(e){var n,t,r=null===(n=S[e])||void 0===n?void 0:n.value,a=null===(t=S.filter((function(n,t){return t!==e}))[0])||void 0===t?void 0:t.value;return H[r]===H[a]?N.Draw:H[r]>H[a]?N.Won:N.Lost}(e);u(n),M(5*n),k(T[e]),f((function(e){return!e}))},Y=Object(y.jsx)("img",{src:S.length&&(null===(n=S[L.Left])||void 0===n?void 0:n.image),alt:"card"}),Z=Object(c.useMemo)((function(){var e;return Object(y.jsx)("img",{src:S.length&&(null===(e=S[L.Right])||void 0===e?void 0:e.image),alt:"card"})}),[S]),ee="number"===typeof s&&W[s],ne=d?null:Object(y.jsx)(C,{type:"button",size:"large",color:"primary",variant:"contained",content:"boolean"===typeof d?"\u0421\u044b\u0433\u0440\u0430\u0435\u043c \u0435\u0449\u0435":"\u0418\u0433\u0440\u0430\u0442\u044c",onClick:function(){return R(5),k(null),u(null),f((function(e){return!e}))}}),te=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(C,{type:"button",size:"large",color:"primary",variant:"contained",content:a?"\u0421\u0432\u0435\u0440\u0445\u0443":"\u0421\u043b\u0435\u0432\u0430",onClick:function(){return V(L.Left)}}),Object(y.jsx)(O.a,{orientation:"vertical",className:Q.divider}),Object(y.jsx)(C,{type:"button",size:"large",color:"primary",variant:"contained",content:a?"\u0421\u043d\u0438\u0437\u0443":"\u0421\u043f\u0440\u0430\u0432\u0430",onClick:function(){return V(L.Right)}})]}),re=P<5&&"number"===typeof s,ae=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:Q.card,children:w?Y:Object(y.jsx)("span",{className:Q.questionMark,children:"?"})}),Object(y.jsxs)("div",{className:Q.buttons,children:[re&&Object(y.jsxs)(x.a,{variant:"h5",align:"center",children:["Game over! ",Object(y.jsx)("br",{})," \u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438 ..."]}),q?Object(y.jsx)(x.a,{align:"center",children:"Loading..."}):Object(y.jsxs)(y.Fragment,{children:[!re&&ne,d&&te]})]}),Object(y.jsx)("div",{className:Q.card,children:w?Z:Object(y.jsx)("span",{className:Q.questionMark,children:"?"})})]});return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(x.a,{className:Q.balance,variant:"h5",children:"Balance: ".concat(P,"$")}),Object(y.jsxs)("div",{className:Q.containerPlay,children:[Object(y.jsx)(x.a,{variant:a?"h4":"h3",children:"number"===typeof s?ee:"\u041a\u0442\u043e \u0432\u044b\u0438\u0433\u0440\u0430\u0435\u0442?"}),Object(y.jsx)(x.a,{variant:"body1",children:"number"===typeof s?"\u0421\u044b\u0433\u0440\u0430\u0439 \u0432 \u0438\u0433\u0440\u0443 \u0435\u0449\u0435 \u0440\u0430\u0437":"\u0421\u044b\u0433\u0440\u0430\u0439 \u0432 \u0438\u0433\u0440\u0443 \u0438 \u0438\u0441\u043f\u044b\u0442\u0430\u0439 \u0443\u0434\u0430\u0447\u0443"}),Object(y.jsx)(j.a,{container:!0,item:!0,xs:12,justifyContent:"center",children:Object(y.jsx)(j.a,{item:!0,xs:11,sm:8,className:Q.containerCards,children:ae})})]})]})},Z=t(177),ee=Object(d.a)((function(){return Object(f.a)({spinner:{display:"flex",alignItems:"center",height:"80vh !important"}})})),ne=function(){var e=ee();return Object(y.jsx)(Z.a,{size:60,thickness:3,className:e.spinner})},te=function(){var e=U(),n=X().remainingCards,t=e.isLoading,r=e.refetch,a=e.data,i=(a=void 0===a?{}:a).deck_id;return Object(c.useEffect)((function(){null!==n&&n<2&&r()}),[n,2]),t?Object(y.jsx)(ne,{}):Object(y.jsx)(Y,{deskID:i})},re=Object(d.a)((function(e){return Object(f.a)({form:{width:"inherit",display:"flex",flexDirection:"column",marginTop:100,"& .MuiInputBase-root":{marginBottom:e.spacing(2)}}})}));function ae(){var e=re(),n=X(),t=n.isAuth,r=n.loginSuccess,i=n.loginError,o=n.activeLoginError,s=n.inactiveLoginError,u=Object(c.useState)({username:"",password:""}),l=Object(m.a)(u,2),d=l[0],f=l[1],h=function(e){return f((function(n){return Object(E.a)(Object(E.a)({},n),{},Object(S.a)({},e.target.name,e.target.value))}))};return t?Object(y.jsx)(b.a,{to:{pathname:"".concat(ie.Home.path)}}):Object(y.jsx)(j.a,{item:!0,lg:4,sm:6,xs:11,children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object(M.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.login(d);case 3:e.sent?(r(),i&&s()):o(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},className:e.form,children:[Object(y.jsx)("h2",{children:"Sing in to your account"}),Object(y.jsx)(w,{variant:"outlined",label:"username",onChange:h,name:"username"}),Object(y.jsx)(w,{variant:"outlined",label:"password",onChange:h,name:"password"}),Object(y.jsx)(C,{type:"submit",color:"primary",variant:"contained",size:"large",content:"Sing in"}),i&&Object(y.jsx)(x.a,{variant:"h6",color:"secondary",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e"})]})})}var ce=function(){return Object(y.jsx)(ae,{})},ie={Home:{path:"/Bridge",name:"Bridge",component:te},Login:{path:"/Bridge/login",name:"LogOut",component:ce}};var oe=function(){var e=h(),n=X(),t=n.isAuth,r=n.logoutSuccess;return Object(y.jsx)(j.a,{container:!0,className:e.appbar,alignItems:"center",justifyContent:"center",children:Object(y.jsxs)(j.a,{item:!0,lg:8,sm:10,xs:11,container:!0,alignItems:"center",justifyContent:"space-between",children:[Object(y.jsx)(u.b,{exact:!0,to:ie.Home.path,className:e.link,children:ie.Home.name}),t&&Object(y.jsx)(u.b,{to:ie.Login.path,className:e.link,onClick:r,children:ie.Login.name})]})})},se=t(88),ue=["children"],le=function(e){var n=e.children,t=Object(se.a)(e,ue),r=X().isAuth;return Object(y.jsx)(b.b,Object(E.a)(Object(E.a)({},t),{},{render:function(e){var t=e.location;return r?n:Object(y.jsx)(b.a,{to:{pathname:"".concat(ie.Login.path),state:{from:t}}})}}))};function je(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(oe,{}),Object(y.jsx)(j.a,{container:!0,alignItems:"stretch",justifyContent:"center",children:Object(y.jsxs)(b.d,{children:[Object(y.jsx)(le,{path:"/",exact:!0,children:Object(y.jsx)(te,{})}),Object(y.jsx)(le,{path:ie.Home.path,exact:!0,children:Object(y.jsx)(te,{})}),Object(y.jsx)(b.b,{path:ie.Login.path,children:Object(y.jsx)(ce,{})})]})})]})}var be=new l.QueryClient;s.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(l.QueryClientProvider,{client:be,children:Object(y.jsx)(u.a,{children:Object(y.jsx)(je,{})})})}),document.getElementById("root"))},66:function(e,n,t){}},[[136,1,2]]]);
//# sourceMappingURL=main.67d5fe21.chunk.js.map